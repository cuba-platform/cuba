<!--
  ~ Copyright (c) 2008-2014 Haulmont. All rights reserved.
  ~ Use is subject to license terms, see http://www.cuba-platform.com/license for details.
  -->

<window xmlns="http://schemas.haulmont.com/cuba/window.xsd"
        class="com.haulmont.cuba.gui.components.filter.edit.FilterEditor"
        caption="mainMsg://filter.editor.caption"
        focusComponent="conditionsTree">

    <companions>
        <web class="com.haulmont.cuba.web.gui.components.filter.edit.WebFilterEditorCompanion"/>
        <desktop class="com.haulmont.cuba.desktop.gui.components.filter.edit.DesktopFilterEditorCompanion"/>
    </companions>

    <dsContext>
        <collectionDatasource id="conditionsDs"
                              class="com.haulmont.cuba.gui.components.filter.condition.AbstractCondition"
                              datasourceClass="com.haulmont.cuba.gui.components.filter.edit.ConditionsDs"/>
    </dsContext>

    <actions>
        <action id="commit" invoke="commitAndClose" caption="mainMsg://actions.Ok" icon="icons/ok.png" shortcut="CTRL-ENTER"/>
    </actions>

    <layout spacing="true" expand="mainLayout">
        <hbox id="mainLayout" spacing="true" expand="leftPanel" width="100%">
            <vbox id="leftPanel" height="100%" spacing="true" expand="conditionsTree">
                <grid spacing="true" width="100%">
                    <columns>
                        <column/>
                        <column flex="1"/>
                    </columns>
                    <rows>
                        <row>
                            <label id="filterNameLabel" value="mainMsg://filter.editor.filterName" align="MIDDLE_LEFT"/>
                            <textField id="filterName" width="100%" required="true" requiredMessage="mainMsg://filter.editor.fillFilterName"/>
                        </row>
                        <row>
                            <label id="availableForAllLabel" value="mainMsg://filter.editor.availableForAll" align="MIDDLE_LEFT"/>
                            <checkBox id="availableForAllCb"/>
                        </row>
                        <row>
                            <label id="defaultLabel" value="mainMsg://filter.editor.default" align="MIDDLE_LEFT"/>
                            <checkBox id="defaultCb"/>
                        </row>
                        <row>
                            <label id="applyDefaultLabel" value="mainMsg://filter.editor.applyDefault" align="MIDDLE_LEFT"/>
                            <checkBox id="applyDefaultCb"/>
                        </row>
                    </rows>
                </grid>
                <hbox spacing="true">
                    <button id="addBtn" action="conditionsTree.add"/>
                    <button id="removeBtn" action="conditionsTree.remove"/>
                    <button id="addGroupAndBtn" action="conditionsTree.addAndGroup"/>
                    <button id="addGroupOrBtn" action="conditionsTree.addOrGroup"/>
                    <button id="moveUpBtn" action="conditionsTree.moveConditionUp"/>
                    <button id="moveDownBtn" action="conditionsTree.moveConditionDown"/>
                </hbox>
                <tree id="conditionsTree" width="100%">
                    <actions>
                        <action id="add" invoke="addCondition" caption="mainMsg://filter.editor.addCondition"/>
                        <action id="remove" trackSelection="true" invoke="removeCondition" caption="mainMsg://filter.editor.removeCondition"/>
                        <action id="addAndGroup" invoke="addAndGroup" caption="mainMsg://filter.editor.addAndGroup"/>
                        <action id="addOrGroup" invoke="addOrGroup" caption="mainMsg://filter.editor.addOrGroup"/>
                        <action id="moveConditionUp" trackSelection="true" invoke="moveConditionUp" caption="mainMsg://filter.editor.moveUp" icon="icons/up.png"/>
                        <action id="moveConditionDown" trackSelection="true" invoke="moveConditionDown" caption="mainMsg://filter.editor.moveDown" icon="icons/down.png"/>
                        <action id="showComponentName" trackSelection="true" invoke="showComponentName" caption="mainMsg://filter.editor.showComponentName"/>
                    </actions>
                    <treechildren datasource="conditionsDs" captionProperty="locCaption"/>
                </tree>
            </vbox>
            <groupBox id="conditionPropertiesLayout" caption="mainMsg://filter.editor.conditionProperties" height="100%" width="theme://cuba.gui.filterEditor.dialog.rightPanel.width">
                <scrollBox scrollBars="vertical" height="100%" width="100%">
                    <frame id="customConditionFrame" screen="customConditionFrame" visible="false"/>
                    <frame id="dynamicAttributesConditionFrame" screen="dynamicAttributesConditionFrame" visible="false"/>
                    <frame id="propertyConditionFrame" screen="propertyConditionFrame" visible="false"/>
                    <frame id="groupConditionFrame" screen="groupConditionFrame" visible="false"/>
                </scrollBox>
            </groupBox>
        </hbox>
        <hbox id="actionBox" spacing="true">
            <button id="okBtn" action="commit"/>
            <button id="cancelBtn" invoke="cancel" caption="mainMsg://actions.Cancel" icon="icons/cancel.png"/>
        </hbox>
    </layout>
</window>